{% extends "layout.html" %}

{% block title %}
    {{ client["name"] }}
{% endblock %}

{% block script %}
    <script src="{{ url_for('static', filename='timesheet.js') }}"></script>
{% endblock %}

{% block main %}
    <div id="start-task-view">
        <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#startTaskModal">
            Start Task
        </button>
      
        <div class="modal fade" id="startTaskModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="startTaskModalLabel" aria-hidden="true">
            <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="startTaskModalLabel">Start new task for {{ client["name"] }}</h5>
                </div>
                <div class="modal-body">
                    You are about to start a new task for {{ client["name"] }}. 
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirm-start" data-bs-dismiss="modal">Confirm</button>
                </div>
            </div>
            </div>
        </div>
    </div>

    <div id="end-task-view">
        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#endTaskModal">
            End Task
        </button>
      
        <div class="modal fade" id="endTaskModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="endTaskModalLabel" aria-hidden="true">
            <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="endTaskModalLabel">End task for {{ client["name"] }}</h5>
                </div>
                <div class="modal-body">
                    You are about to end your ongoing task for {{ client["name"] }}. 
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirm-end" data-bs-target="#submitTaskModal" data-bs-toggle="modal" data-bs-dismiss="modal">Confirm</button>
                </div>
            </div>
            </div>
        </div>

        <div class="modal fade" id="submitTaskModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="endTaskModalLabel" aria-hidden="true">
            <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="submitTaskModalLabel">Submit task for {{ client["name"] }}</h5>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <input autocomplete="off" autofocus class="form-control mx-auto w-auto" id="task-description" name="description" placeholder="Task Description" type="text">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" id="task-submit" data-bs-dismiss="modal">Submit</button>
                </div>
            </div>
            </div>
        </div>
    </div>

    {% for task in tasks %}
        <div class="card" style="height:50px">
            <div class="row mx-2">
                Duration: {{ task["duration"] }}
                Lawyer: {{ task["lawyer"] }}
            </div>
        </div>
    {% endfor %}

{% endblock %}